<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Kamil(a), bƒôdziesz mojƒÖ WalentynkƒÖ?</title>

  <style>
    :root{
      --bg1:#ffd6e7;
      --bg2:#ffeef6;
      --card:#ffffffcc;
      --yes:#ff3b7a;
      --yesHover:#ff1f68;
      --text:#111827;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      background:radial-gradient(circle at top,var(--bg2),var(--bg1));
      font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      overflow:hidden;
      padding:16px;
      color:var(--text);
    }

    /* FULLSCREEN CANVAS */
    #fx{
      position:fixed;
      inset:0;
      width:100vw;
      height:100vh;
      pointer-events:none;
      z-index:9999;
    }

    .card{
      width:min(720px,92vw);
      padding:26px 22px;
      background:var(--card);
      backdrop-filter:blur(10px);
      border-radius:22px;
      text-align:center;
      box-shadow:0 18px 60px rgba(0,0,0,.15);
    }

    .art{
      width:min(260px,80vw);
      margin:0 auto 10px;
      display:block;
      filter:drop-shadow(0 10px 14px rgba(0,0,0,.12));
    }

    h1{
      font-size:clamp(26px,4vw,44px);
      margin:12px 0 18px;
    }

    .button-zone{
      position:relative;
      width:min(520px,92%);
      height:150px;
      margin:0 auto;
      touch-action:none;
    }

    button{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      padding:16px 24px;
      font-size:18px;
      font-weight:800;
      border-radius:999px;
      border:none;
      cursor:pointer;
      box-shadow:0 10px 24px rgba(0,0,0,.14);
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      transition:transform .12s ease, background .12s ease;
      white-space:nowrap;
    }

    #yesBtn{
      left:18%;
      background:var(--yes);
      color:#fff;
    }
    #yesBtn:hover{ background:var(--yesHover); }

    #noBtn{
      left:62%;
      background:#e5e7eb;
      color:#111827;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      opacity:.75;
    }

    .result{
      display:none;
      margin-top:18px;
      animation:pop .35s ease;
    }

    .result h2{
      font-size:clamp(30px,4.5vw,46px);
      margin:10px 0 6px;
    }

    .mini{
      opacity:.85;
      margin:0;
      font-size:15px;
    }

    /* ‚ÄúFireworks‚Äù CSS */
    .fireworks{
      width:min(420px,90vw);
      height:180px;
      margin:14px auto 0;
      position:relative;
      overflow:hidden;
      border-radius:18px;
      background:linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,.25));
      box-shadow:0 12px 30px rgba(0,0,0,.12);
    }
    .burst{
      position:absolute;
      inset:auto;
      width:10px;
      height:10px;
      border-radius:999px;
      left:50%;
      top:60%;
      transform:translate(-50%,-50%);
      animation:burst 900ms ease-out infinite;
      opacity:.9;
    }
    .burst:nth-child(2){ left:25%; top:55%; animation-delay:120ms; }
    .burst:nth-child(3){ left:75%; top:50%; animation-delay:240ms; }
    .burst:nth-child(4){ left:60%; top:35%; animation-delay:360ms; }
    .burst:nth-child(5){ left:40%; top:40%; animation-delay:480ms; }

    @keyframes burst{
      0%{ box-shadow:0 0 0 0 rgba(255,59,122,.0); transform:translate(-50%,-50%) scale(.6); }
      30%{ box-shadow:
        0 -40px 0 0 rgba(255,59,122,.9),
        28px -28px 0 0 rgba(255,163,77,.9),
        40px 0 0 0 rgba(255,59,122,.9),
        28px 28px 0 0 rgba(255,207,92,.9),
        0 40px 0 0 rgba(255,59,122,.9),
        -28px 28px 0 0 rgba(255,163,77,.9),
        -40px 0 0 0 rgba(255,207,92,.9),
        -28px -28px 0 0 rgba(255,59,122,.9);
        opacity:1;
      }
      100%{ box-shadow:
        0 -70px 0 0 rgba(255,59,122,.0),
        50px -50px 0 0 rgba(255,163,77,.0),
        70px 0 0 0 rgba(255,59,122,.0),
        50px 50px 0 0 rgba(255,207,92,.0),
        0 70px 0 0 rgba(255,59,122,.0),
        -50px 50px 0 0 rgba(255,163,77,.0),
        -70px 0 0 0 rgba(255,207,92,.0),
        -50px -50px 0 0 rgba(255,59,122,.0);
        transform:translate(-50%,-50%) scale(1.2);
        opacity:0;
      }
    }

    @keyframes pop{
      from{ transform:scale(.96); opacity:0; }
      to{ transform:scale(1); opacity:1; }
    }
  </style>
</head>

<body>
  <canvas id="fx"></canvas>

  <main class="card">
    <!-- ZWIERZAK Z SERDUSZKIEM (SVG wbudowane, offline) -->
    <svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg" aria-label="s≈Çodki zwierzak z sercem">
      <defs>
        <linearGradient id="fur" x1="0" x2="1">
          <stop offset="0" stop-color="#f7c7a1"/>
          <stop offset="1" stop-color="#f2a97b"/>
        </linearGradient>
        <linearGradient id="heart" x1="0" x2="1">
          <stop offset="0" stop-color="#ff4d7d"/>
          <stop offset="1" stop-color="#ff1f68"/>
        </linearGradient>
      </defs>

      <path d="M250 50 C250 33 270 25 282 38
               C294 25 314 33 314 50
               C314 78 282 92 282 106
               C282 92 250 78 250 50Z"
            fill="url(#heart)"/>

      <path d="M90 120 C90 70 140 40 190 60
               C240 40 290 70 290 120
               C290 180 240 210 190 210
               C140 210 90 180 90 120Z"
            fill="url(#fur)"/>

      <path d="M110 92 L95 55 L140 78 Z" fill="#f2a97b"/>
      <path d="M270 92 L285 55 L240 78 Z" fill="#f2a97b"/>

      <circle cx="160" cy="130" r="8"/>
      <circle cx="220" cy="130" r="8"/>

      <path d="M190 144 C186 144 182 148 182 152
               C182 160 190 164 190 170
               C190 164 198 160 198 152
               C198 148 194 144 190 144Z"
            fill="#ff7aa2"/>
    </svg>

    <h1>Kamila, bƒôdziesz mojƒÖ WalentynkƒÖ?</h1>

    <section class="button-zone" id="zone">
      <button id="yesBtn">TAK üíñ</button>
      <button id="noBtn">NIE üòÖ</button>
    </section>

    <div class="hint" id="hint">‚ÄûNie‚Äù jest trochƒô nie≈õmia≈Çe üòà</div>

    <section class="result" id="result">
      <h2>JUPIIII! üéâ</h2>
      <p class="mini">To teraz oficjalnie: jeste≈õmy um√≥wieni üíå</p>
      <div class="fireworks" aria-hidden="true">
        <div class="burst"></div>
        <div class="burst"></div>
        <div class="burst"></div>
        <div class="burst"></div>
        <div class="burst"></div>
      </div>
    </section>
  </main>

  <script>
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint   = document.getElementById("hint");

    /* --------- CANVAS CONFETTI (offline) --------- */
    const canvas = document.getElementById("fx");
    const ctx = canvas.getContext("2d");

    function resizeCanvas(){
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(innerWidth * dpr);
      canvas.height = Math.floor(innerHeight * dpr);
      canvas.style.width = "100vw";
      canvas.style.height = "100vh";
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    resizeCanvas();
    addEventListener("resize", resizeCanvas);
    addEventListener("orientationchange", () => setTimeout(resizeCanvas, 150));

    const confetti = [];
    function rand(a,b){ return a + Math.random()*(b-a); }
    function spawnBurst(cx, cy, count){
      for(let i=0;i<count;i++){
        confetti.push({
          x: cx,
          y: cy,
          vx: rand(-8,8),
          vy: rand(-14,-6),
          g: rand(0.25,0.45),
          r: rand(3,6),
          rot: rand(0, Math.PI),
          vr: rand(-0.2,0.2),
          life: rand(70, 120),
          hue: rand(330, 60) // pink/orange-ish range (wrap handled below)
        });
      }
    }

    function draw(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(let i=confetti.length-1;i>=0;i--){
        const p = confetti[i];
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.life -= 1;

        // hue wrap
        let h = p.hue;
        if(h < 0) h += 360;
        if(h > 360) h -= 360;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = `hsl(${h} 90% 60%)`;
        ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
        ctx.restore();

        if(p.life <= 0 || p.y > innerHeight + 40) confetti.splice(i,1);
      }
      requestAnimationFrame(draw);
    }
    draw();

    function fullScreenConfetti(){
      const t0 = performance.now();
      const dur = 1500;
      function loop(t){
        const k = (t - t0) / dur;
        if(k <= 1){
          spawnBurst(rand(0, innerWidth), rand(0, innerHeight*0.35), 12);
          requestAnimationFrame(loop);
        }
      }
      requestAnimationFrame(loop);
      setTimeout(() => spawnBurst(innerWidth*0.5, innerHeight*0.55, 260), 300);
    }

    /* --------- YES GROWS --------- */
    let yesScale = 1;
    function growYes(){
      yesScale = Math.min(2.2, yesScale + 0.1);
      yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    /* --------- NO RUNS AWAY --------- */
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function moveNo(px, py){
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      let dx = (b.left + b.width/2) - px;
      let dy = (b.top + b.height/2) - py;
      let mag = Math.hypot(dx, dy) || 1;
      dx /= mag; dy /= mag;

      let newLeft = (b.left - z.left) + dx * 150;
      let newTop  = (b.top  - z.top ) + dy * 150;

      newLeft = clamp(newLeft, 0, z.width  - b.width);
      newTop  = clamp(newTop,  0, z.height - b.height);

      noBtn.style.left = newLeft + "px";
      noBtn.style.top  = newTop  + "px";
      noBtn.style.transform = "none";

      growYes();
    }

    zone.addEventListener("pointermove", (e) => {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        (b.left + b.width/2) - e.clientX,
        (b.top + b.height/2) - e.clientY
      );
      if(d < 140) moveNo(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", (e) => e.preventDefault());

    /* --------- YES CLICK --------- */
    yesBtn.addEventListener("click", () => {
      zone.style.display = "none";
      hint.style.display = "none";
      result.style.display = "block";
      resizeCanvas();
      fullScreenConfetti();
    });
  </script>
</body>
</html>
